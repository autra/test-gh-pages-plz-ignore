<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1">

    <title>Hello World</title>

    <style>
      body {
        border: 1px solid black;
      }
    </style>

    <!-- Inline scripts are forbidden in Firefox OS apps (CSP restrictions),
         so we use a script file. -->
    <script src="app.js" defer></script>

  </head>

  <body>
    <!-- This code is in the public domain. Enjoy! -->
    <h1>Install an app</h1>
    <button id="hosted">Install an hosted app</button>
    <button id="packaged">Install an packaged app</button>
    <script>
      window.addEventListener('load', () => {
        document.getElementById('hosted').addEventListener('click', () => {
          //install hosted
          // This URL must be a full url.
          var manifestUrl =
              'https://autra.github.io/test-gh-pages-plz-ignore/test_hosted/manifest-hosted.webapp';
          var req = navigator.mozApps.install(manifestUrl);
          req.onsuccess = function() {
            alert(this.result.origin);
          };
          req.onerror = function() {
            console.log(this.error);
          };
        });

        document.getElementById('packaged').addEventListener('click', () => {
          //install packaged 
          // This URL must be a full url.
          var manifestUrl =
              'https://autra.github.io/test-gh-pages-plz-ignore/test_hosted/manifest.webapp';
          var req = navigator.mozApps.installPackage(manifestUrl);
          req.onsuccess = function() {
            alert(this.result.origin);
          };
          req.onerror = function() {
            alert(this.error.name);
          };
        });

      });
    </script>
  </body>

</html>
